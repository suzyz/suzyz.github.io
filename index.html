<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Suzy Zhang</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Suzy Zhang">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Suzy Zhang">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Suzy Zhang">
  
    <link rel="alternate" href="/atom.xml" title="Suzy Zhang" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Suzy Zhang</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-stall4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/29/stall4/" class="article-date">
  <time datetime="2017-07-29T08:50:52.000Z" itemprop="datePublished">2017-07-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/29/stall4/">USACO Section4.1 stall4</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Problem-summary"><a href="#Problem-summary" class="headerlink" title="Problem summary"></a>Problem summary</h1><p>Given a bipartite graph, compute the size of the maximum matching.</p>
<h1 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h1><p>I use Hungarian Algorithm to solve this problem.</p>
<h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">202</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> n,m;</div><div class="line"><span class="keyword">int</span> v[maxn][maxn],match[maxn],vis[maxn];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">find_match</span><span class="params">(<span class="keyword">int</span> cur)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> t;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=v[cur][<span class="number">0</span>];i++)</div><div class="line">	&#123;</div><div class="line">		t=v[cur][i];</div><div class="line">		<span class="keyword">if</span>(vis[t]) <span class="keyword">continue</span>;</div><div class="line"></div><div class="line">		vis[t]=<span class="literal">true</span>;</div><div class="line">		<span class="keyword">if</span>(match[t]==<span class="number">0</span> || find_match(match[t]))</div><div class="line">		&#123;</div><div class="line">			match[t]=cur;</div><div class="line">			<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function">fstream <span class="title">fin</span><span class="params">(<span class="string">"stall4.in"</span>,ios::in)</span></span>;</div><div class="line">	<span class="function">fstream <span class="title">fout</span><span class="params">(<span class="string">"stall4.out"</span>,ios::out)</span></span>;</div><div class="line"></div><div class="line">	fin&gt;&gt;n&gt;&gt;m;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">	&#123;</div><div class="line">		fin&gt;&gt;v[i][<span class="number">0</span>];</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=v[i][<span class="number">0</span>];j++)</div><div class="line">			fin&gt;&gt;v[i][j];</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">	&#123;</div><div class="line">		<span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="keyword">sizeof</span>(vis));</div><div class="line">		<span class="keyword">if</span>(find_match(i))</div><div class="line">			ans++;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	fout&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">	fin.close();</div><div class="line">	fout.close();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/07/29/stall4/" data-id="cj5p26nb4000fito9v9ul0eds" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Graph-Theory/">Graph Theory</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hungarian-Alogrithm/">Hungarian Alogrithm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/USACO/">USACO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-nuggets" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/27/nuggets/" class="article-date">
  <time datetime="2017-07-27T03:52:53.000Z" itemprop="datePublished">2017-07-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/27/nuggets/">USACO Section4.1 nuggets</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Problem-Summary"><a href="#Problem-Summary" class="headerlink" title="Problem Summary"></a>Problem Summary</h1><p>Given N positive integers, d[1],d[2],…d[N] (1&lt;=N&lt;=10, 1&lt;=d[i]&lt;=256), compute the largest impossible number that cannot be written as a[1]<em>d[1]+a[2]</em>d[2]+…+a[n]*d[n] (a[i] is non-negative integer, 1&lt;=i&lt;=N).<br>If this number does not exist, print 0.</p>
<h1 id="Analysis-amp-Solution"><a href="#Analysis-amp-Solution" class="headerlink" title="Analysis &amp; Solution"></a>Analysis &amp; Solution</h1><p>Only in two cases, the number does not exist:</p>
<ol>
<li>d[1],d[2],…,d[N] are not relatively prime. That is,the greatest common divisor of d[1],…,d[N] is greater than 1.</li>
<li>The minimum of d[1],d[2],…,d[N] is 1.</li>
</ol>
<p>After checking for the two cases, we can use dynamic programming to solve this. Still, there are some tricks about the upper bound of the answer:</p>
<ol>
<li>Apparently, if the minimum of d[1],…,d[N] is m, and there are m consecutive numbers, then all the numbers from here on are possible.</li>
<li>If m and n are releatively prime, then the largest number we cannot make with them is B = m*n-m-n. Moreover, if m and n are not relatively prime, the answer cannot exceed B. If there is a third number l, then the upper bound must be equal to or less than B. </li>
</ol>
<h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxv = <span class="number">2000000000</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxm = <span class="number">256</span>*<span class="number">256</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> n,d[<span class="number">10</span>];</div><div class="line"><span class="keyword">bool</span> f[maxm];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">if</span>(a%b==<span class="number">0</span>) <span class="keyword">return</span> b;</div><div class="line">	<span class="keyword">return</span> gcd(b,a%b);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function">fstream <span class="title">fin</span><span class="params">(<span class="string">"nuggets.in"</span>,ios::in)</span></span>;</div><div class="line">	<span class="function">fstream <span class="title">fout</span><span class="params">(<span class="string">"nuggets.out"</span>,ios::out)</span></span>;</div><div class="line"></div><div class="line">	fin&gt;&gt;n;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) fin&gt;&gt;d[i];</div><div class="line">	fin.close();</div><div class="line">	sort(d,d+n);</div><div class="line"></div><div class="line">	<span class="keyword">if</span>(d[<span class="number">0</span>]==<span class="number">1</span>)</div><div class="line">	&#123;</div><div class="line">		fout&lt;&lt;<span class="number">0</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">		fout.close();</div><div class="line">		<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">int</span> p=d[<span class="number">0</span>];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++) p=gcd(p,d[i]);</div><div class="line"></div><div class="line">	<span class="keyword">if</span>(p!=<span class="number">1</span>)</div><div class="line">	&#123;</div><div class="line">		fout&lt;&lt;<span class="number">0</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">		fout.close();</div><div class="line">		<span class="keyword">return</span> <span class="number">0</span>;	</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	f[<span class="number">0</span>]=<span class="literal">true</span>;</div><div class="line">	<span class="keyword">int</span> lim=d[n<span class="number">-1</span>]*d[n<span class="number">-2</span>]-d[n<span class="number">-1</span>]-d[n<span class="number">-2</span>];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=d[i];j&lt;=lim;j++)</div><div class="line">			<span class="keyword">if</span>(f[j-d[i]])</div><div class="line">				f[j]=<span class="literal">true</span>;</div><div class="line"></div><div class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=lim;i&gt;=<span class="number">1</span>;i--)</div><div class="line">		<span class="keyword">if</span>(!f[i])</div><div class="line">		&#123;</div><div class="line">			ans=i;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">	fout&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">	fout.close();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/07/27/nuggets/" data-id="cj5p26naw000bito9gszjjkzs" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DP/">DP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Number-Theory/">Number Theory</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/USACO/">USACO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-game1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/26/game1/" class="article-date">
  <time datetime="2017-07-26T03:50:00.000Z" itemprop="datePublished">2017-07-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/26/game1/">USACO Section3.3 game1</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Problem-Summary"><a href="#Problem-Summary" class="headerlink" title="Problem Summary"></a>Problem Summary</h1><p>Two players play a game with a sequence of N positive integers laid onto a 1*N game board. Player 1 starts the game and they move alternately by selecting a number from either the left or the right end of the board. The selected number is then deleted, and its value is added to the score of the player who selected it. Whoever has the greater sum in the end wins.<br>Write a program that implements the optimal strategy for player 2. The optimal strategy yields maximum points when playing against the “best possible” opponent.</p>
<h1 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h1><p>We can use dynamic programming to compute the best scores.<br>Define f[i][j] to be the highest score we can get by going first with the sequence from i to j.<br>Then the player can choose data[i] or data[j],and leave the rest to his opponent. So we can write :</p>
<p>  <strong>f[i][j] = max(data[i]+sum[i+1][j]-f[i+1][j],data[j]+sum[i][j-1]-f[i][j-1]), 1&lt;=i&lt;j&lt;=N<br>  f[i][i] = data[i], 1&lt;=i&lt;=N</strong></p>
<h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">102</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> n,d[maxn];</div><div class="line"><span class="keyword">int</span> sum[maxn][maxn],f[maxn][maxn];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function">fstream <span class="title">fin</span><span class="params">(<span class="string">"game1.in"</span>,ios::in)</span></span>;</div><div class="line">	<span class="function">fstream <span class="title">fout</span><span class="params">(<span class="string">"game1.out"</span>,ios::out)</span></span>;</div><div class="line"></div><div class="line">	fin&gt;&gt;n;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">	&#123;</div><div class="line">		fin&gt;&gt;d[i];</div><div class="line">		f[i][i]=sum[i][i]=d[i];</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;=n;j++)</div><div class="line">			sum[i][j]=sum[i][j<span class="number">-1</span>]+d[j];</div><div class="line"></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> len=<span class="number">2</span>;len&lt;=n;len++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n-len+<span class="number">1</span>;i++)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">int</span> j=i+len<span class="number">-1</span>;</div><div class="line">			f[i][j]=max(d[i]+sum[i+<span class="number">1</span>][j]-f[i+<span class="number">1</span>][j],d[j]+sum[i][j<span class="number">-1</span>]-f[i][j<span class="number">-1</span>]);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">	fout&lt;&lt;f[<span class="number">1</span>][n]&lt;&lt;<span class="string">" "</span>&lt;&lt;sum[<span class="number">1</span>][n]-f[<span class="number">1</span>][n]&lt;&lt;<span class="built_in">endl</span>;</div><div class="line"></div><div class="line">	fin.close();</div><div class="line">	fout.close();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/07/26/game1/" data-id="cj5p26nam0006ito9v0q0cnh9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DP/">DP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Game-Theory/">Game Theory</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/USACO/">USACO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-camlot" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/26/camlot/" class="article-date">
  <time datetime="2017-07-26T02:37:20.000Z" itemprop="datePublished">2017-07-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/26/camlot/">USACO Section3.3 camlot</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Problem-Summary"><a href="#Problem-Summary" class="headerlink" title="Problem Summary"></a>Problem Summary</h1><p>Given a board with R rows and C columns, a king and some(from zero to R*C) knights, and their moving patterns, compute the minimum number of moves the player must perform to gather them all in the same square.</p>
<p>Specially, whenever the king and any knight are placed in the same square, the player may choose to move the king and the knight together from that point on, as a single knight.</p>
<h1 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h1><ol>
<li>If there is no king, we can simply use the shortest path algorithm. </li>
<li>If there is a king but no knight to pick it up, the total cost C2 of gathering is the sum of the distance that each knight must travel and the distance the king must travel.</li>
<li>If the king is picked up by a knight, then the total cost can be seen as C3 = C2 + E. E is the sum of the extra steps the knight who picks up the king took and the steps the king took to meet the knight. </li>
<li>So we only need to compute C2 and E. C2 can be easily calulated by shortest path algorithm. To get E, we can modify the shortest path algorithm, to calculate not noly the distances from a knight to all the squares without picking up the king, but also the steps needed for the knight and the king to meet and go to any square on the board.  </li>
</ol>
<h1 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h1><ol>
<li><p>Get the king’s location and calculate the distance between any square on the board and the king.</p>
</li>
<li><p>For each knight, we use the modified shortest path algorithm to calculate the cost to go to any square on the board, and the cost to pick up the king and then go to any square, then update the total cost of the knights to gather and the minimum extra cost to pick up the king and gather.</p>
</li>
<li><p>Find the square with the minimum sum of cost and pickup cost.</p>
</li>
</ol>
<h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">32</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxm = <span class="number">28</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxd = <span class="number">4000</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> dir[][<span class="number">2</span>] = &#123;&#123;<span class="number">-1</span>,<span class="number">-2</span>&#125;,&#123;<span class="number">-2</span>,<span class="number">-1</span>&#125;,&#123;<span class="number">-2</span>,<span class="number">1</span>&#125;,&#123;<span class="number">-1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">1</span>,<span class="number">-2</span>&#125;,&#123;<span class="number">2</span>,<span class="number">-1</span>&#125;,&#123;<span class="number">2</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">2</span>&#125;&#125;;</div><div class="line"></div><div class="line"><span class="keyword">int</span> n,m,total,num=<span class="number">0</span>,ans;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Coordinate</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> x,y;</div><div class="line">&#125; king,knight;</div><div class="line"></div><div class="line"><span class="keyword">int</span> king_dist[maxn][maxm],dist[maxn][maxm][<span class="number">2</span>];</div><div class="line"></div><div class="line"><span class="keyword">int</span> cost[maxn][maxm],king_cost[maxn][maxm];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">move</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> k)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> tx,ty,f=<span class="number">0</span>;</div><div class="line"></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)</div><div class="line">	&#123;</div><div class="line">		tx=x+dir[i][<span class="number">0</span>];</div><div class="line">		ty=y+dir[i][<span class="number">1</span>];</div><div class="line"></div><div class="line">		<span class="keyword">if</span>(tx&lt;<span class="number">1</span> || ty&lt;<span class="number">1</span> || tx&gt;n || ty&gt;m) <span class="keyword">continue</span>;</div><div class="line"></div><div class="line">		<span class="keyword">if</span>(dist[tx][ty][k]&gt;dist[x][y][k]+<span class="number">1</span>)</div><div class="line">		&#123;</div><div class="line">			dist[tx][ty][k]=dist[x][y][k]+<span class="number">1</span>;</div><div class="line">			f=<span class="number">1</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">if</span>(k==<span class="number">0</span> &amp;&amp; dist[x][y][<span class="number">1</span>]&gt;dist[x][y][<span class="number">0</span>]+king_dist[x][y])</div><div class="line">	&#123;</div><div class="line">		dist[x][y][<span class="number">1</span>]=dist[x][y][<span class="number">0</span>]+king_dist[x][y];</div><div class="line">		<span class="keyword">if</span>(king_dist[x][y]&gt;f) f=king_dist[x][y];</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">return</span> f;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">calc_dist</span><span class="params">(<span class="keyword">int</span> sx,<span class="keyword">int</span> sy)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</div><div class="line">			dist[i][j][<span class="number">0</span>]=dist[i][j][<span class="number">1</span>]=maxd;</div><div class="line"></div><div class="line">	<span class="keyword">int</span> maxd;</div><div class="line">	dist[sx][sy][<span class="number">0</span>]=<span class="number">0</span>;</div><div class="line">	maxd=dist[sx][sy][<span class="number">1</span>]=king_dist[sx][sy];</div><div class="line"></div><div class="line">	<span class="keyword">int</span> flag;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> d=<span class="number">0</span>;d&lt;=maxd;d++)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</div><div class="line">			&#123;</div><div class="line">				<span class="keyword">if</span>(dist[i][j][<span class="number">0</span>]==d)</div><div class="line">				&#123;</div><div class="line">					flag=move(i,j,<span class="number">0</span>);</div><div class="line">					<span class="keyword">if</span>(d+flag&gt;maxd) maxd=d+flag;</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">if</span>(dist[i][j][<span class="number">1</span>]==d)</div><div class="line">				&#123;</div><div class="line">					flag=move(i,j,<span class="number">1</span>);</div><div class="line">					<span class="keyword">if</span>(d+flag&gt;maxd) maxd=d+flag;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function">fstream <span class="title">fin</span><span class="params">(<span class="string">"camelot.in"</span>,ios::in)</span></span>;</div><div class="line">	<span class="function">fstream <span class="title">fout</span><span class="params">(<span class="string">"camelot.out"</span>,ios::out)</span></span>;</div><div class="line"></div><div class="line">	<span class="keyword">int</span> a;</div><div class="line">	<span class="keyword">char</span> b;</div><div class="line">	fin&gt;&gt;n&gt;&gt;m;</div><div class="line">	fin&gt;&gt;b&gt;&gt;a;</div><div class="line">	king.x=a;</div><div class="line">	king.y=b-<span class="string">'A'</span>+<span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</div><div class="line">			king_dist[i][j]=king_cost[i][j]=max(<span class="built_in">abs</span>(i-king.x),<span class="built_in">abs</span>(j-king.y));</div><div class="line"></div><div class="line">	<span class="keyword">while</span>(!fin.eof())</div><div class="line">	&#123;</div><div class="line">		fin&gt;&gt;b&gt;&gt;a;</div><div class="line">		<span class="keyword">if</span>(fin.eof()) <span class="keyword">break</span>;</div><div class="line"></div><div class="line">		knight.x=a;</div><div class="line">		knight.y=b-<span class="string">'A'</span>+<span class="number">1</span>;</div><div class="line"></div><div class="line">		calc_dist(knight.x,knight.y);</div><div class="line"></div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</div><div class="line">			&#123;</div><div class="line">				cost[i][j]+=dist[i][j][<span class="number">0</span>];</div><div class="line">				<span class="keyword">if</span>(dist[i][j][<span class="number">1</span>]-dist[i][j][<span class="number">0</span>]&lt;king_cost[i][j])</div><div class="line">					king_cost[i][j]=dist[i][j][<span class="number">1</span>]-dist[i][j][<span class="number">0</span>];</div><div class="line">			&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	ans=INT_MAX;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</div><div class="line">			<span class="keyword">if</span>(cost[i][j]+king_cost[i][j]&lt;ans)</div><div class="line">				ans=cost[i][j]+king_cost[i][j];</div><div class="line"></div><div class="line">	fout&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">	fin.close();</div><div class="line">	fout.close();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/07/26/camlot/" data-id="cj5p26na40001ito9afk2cgom" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Graph-Theory/">Graph Theory</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/USACO/">USACO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-agrinet" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/23/agrinet/" class="article-date">
  <time datetime="2017-07-23T03:24:55.000Z" itemprop="datePublished">2017-07-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/23/agrinet/">USACO Section3.1 agrinet</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Problem-Summary"><a href="#Problem-Summary" class="headerlink" title="Problem Summary"></a>Problem Summary</h1><p>Given an undirected graph, find the weight of its minimum spanning tree. </p>
<h1 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h1><p>Since the graph is dense, we choose Prim Algorithm over Kruskal Algorithm.<br>The graph is stored in adjacency matrix, so the time complexity is O(n^2).</p>
<h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> n;</div><div class="line"><span class="keyword">int</span> dist[<span class="number">102</span>][<span class="number">102</span>],d[<span class="number">102</span>];</div><div class="line"><span class="keyword">bool</span> vis[<span class="number">102</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">prim</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) d[i]=dist[<span class="number">0</span>][i];</div><div class="line"></div><div class="line">	<span class="keyword">int</span> mind,k,ans=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</div><div class="line">	&#123;</div><div class="line">		mind=INT_MAX;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++)</div><div class="line">			<span class="keyword">if</span>(!vis[j] &amp;&amp; d[j]&lt;mind)</div><div class="line">			&#123;</div><div class="line">				mind=d[j];</div><div class="line">				k=j;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">		<span class="keyword">if</span>(mind==INT_MAX) <span class="keyword">break</span>;</div><div class="line"></div><div class="line">		vis[k]=<span class="literal">true</span>;</div><div class="line">		ans+=mind;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++)</div><div class="line">			<span class="keyword">if</span>(!vis[j] &amp;&amp; d[j]&gt;dist[k][j])</div><div class="line">				d[j]=dist[k][j];</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> ans;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function">fstream <span class="title">fin</span><span class="params">(<span class="string">"agrinet.in"</span>,ios::in)</span></span>;</div><div class="line">	<span class="function">fstream <span class="title">fout</span><span class="params">(<span class="string">"agrinet.out"</span>,ios::out)</span></span>;</div><div class="line"></div><div class="line">	fin&gt;&gt;n;</div><div class="line"></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++)</div><div class="line">			fin&gt;&gt;dist[i][j];</div><div class="line"></div><div class="line">	fout&lt;&lt;prim()&lt;&lt;<span class="built_in">endl</span>;</div><div class="line"></div><div class="line">	fin.close();</div><div class="line">	fout.close();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/07/23/agrinet/" data-id="cj5p26n9x0000ito9xlid5tys" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Graph-Theory/">Graph Theory</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MST/">MST</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Prim/">Prim</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/USACO/">USACO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-fact4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/23/fact4/" class="article-date">
  <time datetime="2017-07-23T03:04:16.000Z" itemprop="datePublished">2017-07-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/23/fact4/">USACO Section3.2 fact4</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Problem-Summary"><a href="#Problem-Summary" class="headerlink" title="Problem Summary"></a>Problem Summary</h1><p>Given N, find the last digit of N! that is not zero.</p>
<h1 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h1><p>The solution is obvious once we notice that, </p>
<ol>
<li>Only 2 and 5 as a pair can cause 0 at the end of the product,</li>
<li>There are always more 2s than 5s in a factorial.</li>
</ol>
<p>So we firstly ignore the 2s and 5s during the calculation, and get the number of 2s and 5s respectively, then multiply the result by the extra 2s.</p>
<h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> n,ans=<span class="number">1</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function">fstream <span class="title">fin</span><span class="params">(<span class="string">"fact4.in"</span>,ios::in)</span></span>;</div><div class="line">	<span class="function">fstream <span class="title">fout</span><span class="params">(<span class="string">"fact4.out"</span>,ios::out)</span></span>;</div><div class="line"></div><div class="line">	fin&gt;&gt;n;</div><div class="line"></div><div class="line">	<span class="keyword">int</span> j;</div><div class="line">	<span class="keyword">int</span> c2=<span class="number">0</span>,c5=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</div><div class="line">	&#123;</div><div class="line">		j=i;</div><div class="line">		<span class="keyword">while</span>(j&gt;<span class="number">0</span> &amp;&amp; (j&amp;<span class="number">1</span>)==<span class="number">0</span>) &#123; j&gt;&gt;=<span class="number">1</span>; c2++; &#125;</div><div class="line">		<span class="keyword">while</span>(j&gt;<span class="number">0</span> &amp;&amp; j%<span class="number">5</span>==<span class="number">0</span>) &#123; j/=<span class="number">5</span>; c5++; &#125;</div><div class="line"></div><div class="line">		ans=ans*j%<span class="number">10</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	c2-=c5;</div><div class="line">	<span class="keyword">while</span>(c2)</div><div class="line">	&#123;</div><div class="line">		ans=(ans&lt;&lt;<span class="number">1</span>)%<span class="number">10</span>;</div><div class="line">		c2--;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	fout&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">	</div><div class="line">	fin.close();</div><div class="line">	fout.close();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/07/23/fact4/" data-id="cj5p26nag0005ito9enzwc5zc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Number-Theory/">Number Theory</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/USACO/">USACO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-butter" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/22/butter/" class="article-date">
  <time datetime="2017-07-22T10:07:14.000Z" itemprop="datePublished">2017-07-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/22/butter/">USACO Section3.2 butter</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Problem-Summary"><a href="#Problem-Summary" class="headerlink" title="Problem Summary"></a>Problem Summary</h1><p>Given P pastures, C cows and their locations, and the paths connecting the pastures, choose a pasture for farmer John to put a piece of butter, making the total time that cows need to walk there minimal. </p>
<h1 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h1><p>First, stimulate adjacency table with arrays to store the map.<br>Then, enumerate the pasture to place the butter, use SPFA to calculate the distances, and find minimal total distance.</p>
<h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxp = <span class="number">802</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxm = <span class="number">3000</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> n,p,m;</div><div class="line"><span class="keyword">int</span> w[maxp],dist[maxp];</div><div class="line"><span class="keyword">int</span> head[maxp],next_edge[maxm],en[maxm],len[maxm];</div><div class="line"></div><div class="line"><span class="keyword">int</span> ans=INT_MAX;</div><div class="line"><span class="keyword">int</span> l,r,qu[<span class="number">10</span>*maxm];</div><div class="line"><span class="keyword">bool</span> in_qu[maxp];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">spfa</span><span class="params">(<span class="keyword">int</span> s)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="built_in">memset</span>(in_qu,<span class="number">0</span>,<span class="keyword">sizeof</span>(in_qu));</div><div class="line"></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=p;i++)</div><div class="line">		dist[i]=INT_MAX;</div><div class="line"></div><div class="line">	dist[s]=<span class="number">0</span>;</div><div class="line">	qu[<span class="number">0</span>]=s;</div><div class="line">	in_qu[s]=<span class="literal">true</span>;</div><div class="line">	l=<span class="number">0</span>; r=<span class="number">1</span>;</div><div class="line"></div><div class="line">	<span class="keyword">int</span> cur,u,v;</div><div class="line">	<span class="keyword">while</span>(l&lt;r)</div><div class="line">	&#123;</div><div class="line">		cur=qu[l];</div><div class="line">		l++;</div><div class="line"></div><div class="line">		u=head[cur];</div><div class="line">		<span class="keyword">while</span>(u&gt;=<span class="number">0</span>)</div><div class="line">		&#123;</div><div class="line">			v=en[u];</div><div class="line">			<span class="keyword">if</span>(dist[v]&gt;dist[cur]+len[u])</div><div class="line">			&#123;</div><div class="line">				dist[v]=dist[cur]+len[u];</div><div class="line">				<span class="keyword">if</span>(!in_qu[v])</div><div class="line">				&#123;</div><div class="line">					qu[r]=v;</div><div class="line">					in_qu[v]=<span class="literal">true</span>;</div><div class="line">					r++;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			u=next_edge[u];</div><div class="line">		&#125;</div><div class="line">		in_qu[cur]=<span class="literal">false</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">get_sum</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> res=<span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=p;i++)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span>(w[i]&gt;<span class="number">0</span> &amp;&amp; dist[i]==INT_MAX)</div><div class="line">			<span class="keyword">return</span> INT_MAX;</div><div class="line">		res+=w[i]*dist[i];</div><div class="line">		<span class="keyword">if</span>(res&gt;ans) <span class="keyword">return</span> res;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function">fstream <span class="title">fin</span><span class="params">(<span class="string">"butter.in"</span>,ios::in)</span></span>;</div><div class="line">	<span class="function">fstream <span class="title">fout</span><span class="params">(<span class="string">"butter.out"</span>,ios::out)</span></span>;</div><div class="line"></div><div class="line">	<span class="keyword">int</span> tmp;</div><div class="line">	fin&gt;&gt;n&gt;&gt;p&gt;&gt;m;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</div><div class="line">	&#123;</div><div class="line">		fin&gt;&gt;tmp;</div><div class="line">		w[tmp]++;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=p;i++)</div><div class="line">		head[i]=<span class="number">-1</span>;</div><div class="line"></div><div class="line">	<span class="keyword">int</span> a,b,c;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</div><div class="line">	&#123;</div><div class="line">		fin&gt;&gt;a&gt;&gt;b&gt;&gt;c;</div><div class="line">		next_edge[i&lt;&lt;<span class="number">1</span>]=head[a]; head[a]=i&lt;&lt;<span class="number">1</span>; en[i&lt;&lt;<span class="number">1</span>]=b;</div><div class="line">		next_edge[(i&lt;&lt;<span class="number">1</span>)+<span class="number">1</span>]=head[b]; head[b]=(i&lt;&lt;<span class="number">1</span>)+<span class="number">1</span>; en[(i&lt;&lt;<span class="number">1</span>)+<span class="number">1</span>]=a;</div><div class="line">		len[i&lt;&lt;<span class="number">1</span>]=len[(i&lt;&lt;<span class="number">1</span>)+<span class="number">1</span>]=c;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=p;i++)</div><div class="line">	&#123;</div><div class="line">		spfa(i);</div><div class="line">		tmp=get_sum();</div><div class="line">		ans=tmp&lt;ans ? tmp:ans;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	fout&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">	fin.close();</div><div class="line">	fout.close();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/07/22/butter/" data-id="cj5p26nad0004ito9mvjopii6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Graph-Theory/">Graph Theory</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SPFA/">SPFA</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/USACO/">USACO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-msquare" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/22/msquare/" class="article-date">
  <time datetime="2017-07-22T03:00:25.000Z" itemprop="datePublished">2017-07-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/22/msquare/">USACO Section3.2 msquare</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Problem-Summary"><a href="#Problem-Summary" class="headerlink" title="Problem Summary"></a>Problem Summary</h2><p>  Given the initial and target configurations of the magic board, and three basic transformations, compute a minimal sequence of basic transformations.</p>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>  There are at most 8!=40320 configurations, so it is acceptable to use BFS.<br>  To avoid excessive memory usage, I use Cantor expansion to get hash value of configurations. </p>
<p>Assume C=(c[1],c[2],…,c[n-1],c[n]) is a configuration of integers 1,2,..n , then the hash value of C is:<br>f(C) = a[1]<em>(n-1)!+a[2]</em>(n-2)!+…+a[i]<em>(n-i)!+…+a[n-1]</em>1!+a[n]*0!<br>(0&lt;=a[i]&lt;=n-i, 1&lt;=i&lt;=n)</p>
<p>a[i]: the number of the numbers that is smaller than c[i] in c[i+1],c[i+2],..,c[n]</p>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Square</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> config[<span class="number">8</span>];</div><div class="line">&#125; target;</div><div class="line"></div><div class="line">Square init = &#123; .config = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>&#125; &#125;;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></div><div class="line">&#123;</div><div class="line">	Square sq;</div><div class="line">	<span class="keyword">int</span> steps,last;</div><div class="line">	<span class="keyword">char</span> opr;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">int</span> head,tail;</div><div class="line">Node qu[<span class="number">40330</span>];</div><div class="line"><span class="keyword">bool</span> vis[<span class="number">41000</span>];</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> tr[][<span class="number">8</span>]=&#123;</div><div class="line">	&#123;<span class="number">7</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>&#125;,</div><div class="line">	&#123;<span class="number">3</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">4</span>&#125;,</div><div class="line">	&#123;<span class="number">0</span>,<span class="number">6</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">7</span>&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> factorial[]=&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">24</span>,<span class="number">120</span>,<span class="number">720</span>,<span class="number">5040</span>&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">transform</span><span class="params">(<span class="keyword">int</span> mode,<span class="keyword">const</span> Square &amp;st,Square &amp;res)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)</div><div class="line">		res.config[i]=st.config[tr[mode][i]];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">cantor</span><span class="params">(Square *a)</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> res=<span class="number">0</span>,t;</div><div class="line"></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">7</span>;i++)</div><div class="line">	&#123;</div><div class="line">		t=<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;<span class="number">8</span>;j++)</div><div class="line">			<span class="keyword">if</span>(a-&gt;config[j]&gt;a-&gt;config[i])</div><div class="line">				t++;</div><div class="line"></div><div class="line">		res+=t*factorial[<span class="number">7</span>-i];</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function">fstream <span class="title">fin</span><span class="params">(<span class="string">"msquare.in"</span>,ios::in)</span></span>;</div><div class="line">	<span class="function">fstream <span class="title">fout</span><span class="params">(<span class="string">"msquare.out"</span>,ios::out)</span></span>;</div><div class="line"></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++) fin&gt;&gt;target.config[i];</div><div class="line"></div><div class="line">	<span class="keyword">int</span> tar_cantor=cantor(&amp;target);</div><div class="line"></div><div class="line">	<span class="keyword">if</span>(cantor(&amp;init)==tar_cantor)</div><div class="line">	&#123;</div><div class="line">		fout&lt;&lt;<span class="number">0</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">		fin.close();</div><div class="line">		fout.close();</div><div class="line">		<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	head=<span class="number">0</span>; tail=<span class="number">1</span>;</div><div class="line">	qu[<span class="number">0</span>].sq=init;</div><div class="line">	qu[<span class="number">0</span>].steps=<span class="number">0</span>;</div><div class="line">	qu[<span class="number">0</span>].last=<span class="number">0</span>;</div><div class="line">	vis[cantor(&amp;init)]=<span class="literal">true</span>;</div><div class="line"></div><div class="line">	<span class="keyword">int</span> idx=<span class="number">0</span>;</div><div class="line">	Node cur;</div><div class="line">	Square tmp;</div><div class="line">	<span class="keyword">bool</span> flag=<span class="literal">false</span>;</div><div class="line">	<span class="keyword">while</span>(head&lt;tail)</div><div class="line">	&#123;</div><div class="line">		cur=qu[head];</div><div class="line">		head++;</div><div class="line">		</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</div><div class="line">		&#123;</div><div class="line">			transform(i,cur.sq,tmp);</div><div class="line"></div><div class="line">			<span class="keyword">int</span> j=cantor(&amp;tmp);</div><div class="line">			<span class="keyword">if</span>(vis[j]) <span class="keyword">continue</span>;</div><div class="line">			vis[j]=<span class="literal">true</span>;</div><div class="line"></div><div class="line">			qu[tail].sq=tmp;</div><div class="line">			qu[tail].steps=cur.steps+<span class="number">1</span>;</div><div class="line">			qu[tail].last=head<span class="number">-1</span>;</div><div class="line">			qu[tail].opr=<span class="string">'A'</span>+i;</div><div class="line"></div><div class="line">			tail++;</div><div class="line"></div><div class="line">			<span class="keyword">if</span>(j==tar_cantor)</div><div class="line">			&#123;</div><div class="line">				idx=tail<span class="number">-1</span>;</div><div class="line">				flag=<span class="literal">true</span>;</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(flag) <span class="keyword">break</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	fout&lt;&lt;qu[idx].steps&lt;&lt;<span class="built_in">endl</span>;</div><div class="line"></div><div class="line">	<span class="keyword">int</span> count=<span class="number">0</span>,i=<span class="number">0</span>;</div><div class="line">	<span class="keyword">char</span> ans[<span class="number">200</span>];</div><div class="line">	<span class="keyword">while</span>(idx&gt;<span class="number">0</span>)</div><div class="line">	&#123;</div><div class="line">		ans[i]=qu[idx].opr;</div><div class="line">		idx=qu[idx].last;</div><div class="line">		i++;</div><div class="line">	&#125;</div><div class="line">	i--;</div><div class="line">	count=<span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span>(i&gt;=<span class="number">0</span>)</div><div class="line">	&#123;</div><div class="line">		fout&lt;&lt;ans[i];</div><div class="line">		i--;</div><div class="line">		count++;</div><div class="line">		<span class="keyword">if</span>(count%<span class="number">60</span>==<span class="number">0</span>)</div><div class="line">		&#123;</div><div class="line">			count=<span class="number">0</span>;</div><div class="line">			fout&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span>(count) fout&lt;&lt;<span class="built_in">endl</span>;</div><div class="line"></div><div class="line">	fin.close();</div><div class="line">	fout.close();</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/07/22/msquare/" data-id="cj5p26nar0009ito959wydrqb" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BFS/">BFS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hash/">Hash</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/USACO/">USACO</a></li></ul>

    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/BFS/">BFS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DP/">DP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Game-Theory/">Game Theory</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Graph-Theory/">Graph Theory</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hash/">Hash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hungarian-Alogrithm/">Hungarian Alogrithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MST/">MST</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Number-Theory/">Number Theory</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Prim/">Prim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPFA/">SPFA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/USACO/">USACO</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/07/29/stall4/">USACO Section4.1 stall4</a>
          </li>
        
          <li>
            <a href="/2017/07/27/nuggets/">USACO Section4.1 nuggets</a>
          </li>
        
          <li>
            <a href="/2017/07/26/game1/">USACO Section3.3 game1</a>
          </li>
        
          <li>
            <a href="/2017/07/26/camlot/">USACO Section3.3 camlot</a>
          </li>
        
          <li>
            <a href="/2017/07/23/agrinet/">USACO Section3.1 agrinet</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Suzy Zhang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>